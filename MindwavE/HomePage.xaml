<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="MindwavE.HomePage"
             BackgroundColor="#F5F5F5">
    <Grid RowDefinitions="Auto, *, Auto">
        <!-- Top Section: Header with Chat, Settings -->
        <Grid Grid.Row="0" ColumnDefinitions="*, Auto, Auto" Padding="20,30,20,10" VerticalOptions="Start">
            <!-- Chat with AI Button -->
            <Border
                Grid.Column="0"
                StrokeThickness="0"
                StrokeShape="RoundRectangle 40"
                Background="White"
                Padding="10,10"
                Margin="0,0,10,0"
                HorizontalOptions="Fill"
                MaximumWidthRequest="750"
                >

                <Border.Shadow>
                    <Shadow
                        Opacity="0.1"
                        Radius="3"
                        Offset="0,7"
                        Brush="Black" />
                </Border.Shadow>

                <Border.GestureRecognizers>
                    <TapGestureRecognizer Tapped="GoToChatPage" />
                </Border.GestureRecognizers>

                <HorizontalStackLayout Spacing="10" VerticalOptions="Center">

                    <Image Source="ai_chat_icon.png"
                           HeightRequest="20"
                           WidthRequest="20"
                           VerticalOptions="Center" />

                    <Label Text="Razgovaraj sa našim AI-chat botom"
                           VerticalOptions="Center"
                           TextColor="#333333" />

                    <!-- Circular background with image -->
                    <Border
                        WidthRequest="50"
                        HeightRequest="50"
                        BackgroundColor="#cec9f5"
                        StrokeShape="Ellipse"
                        HorizontalOptions="End"
                        VerticalOptions="Center"
                        >

                        <Image
                            Source="mindwave_assistant_icon.png"
                            Aspect="AspectFit"
                            WidthRequest="40"
                            HeightRequest="40"
                            HorizontalOptions="Center"
                            VerticalOptions="Center" />

                    </Border>

                </HorizontalStackLayout>

            </Border>

            <!-- Settings Icon -->
            <Image Grid.Column="1" Source="settings_gear.png" HeightRequest="50" WidthRequest="50" VerticalOptions="Center" Margin="15,0,10,0"/>
        </Grid>

        <!-- Main Content Section -->
        <ScrollView Grid.Row="1">
            <VerticalStackLayout Padding="20,30,20,20" Spacing="20">
                <!-- Welcome Message -->
                <Label Text="Dobrodošao/la nazad, Alex!" 
                       FontSize="45" 
                       FontAttributes="Bold" 
                       TextColor="#333333" 
                       Margin="0,10,0,0"
                       HorizontalOptions="Center"
                       HorizontalTextAlignment="Center"/>

                <!-- Community and Diary Buttons -->
                <StackLayout Orientation="Horizontal" Spacing="25" HorizontalOptions="Fill">
                    <!-- Community Button -->
                    <Border 
                        StrokeShape="RoundRectangle 40"
                        StrokeThickness="3"
                        BackgroundColor="#61f2bb" 
                        Padding="45"
                        HorizontalOptions="FillAndExpand"
                        MaximumWidthRequest="500"
                        >

                        <Border.Shadow>
                            <Shadow
                                Opacity="0.25"
                                Radius="3"
                                Offset="0,7"
                                Brush="Black" />
                        </Border.Shadow>


                        <StackLayout 
                            Spacing="10" 
                            HorizontalOptions="Center" 
                            VerticalOptions="Center">


                            <Label Text="Zajednica" TextColor="#FFFFFF" FontSize="30" FontAttributes="Bold" LineBreakMode="WordWrap" MaxLines="2" />
                            <Image 
                                Source="multiple_users.png" 
                                HeightRequest="100" 
                                WidthRequest="100"/>
                        </StackLayout>

                    </Border>
                    <!-- Diary Button -->
                    <Border
                        StrokeShape="RoundRectangle 40"
                        StrokeThickness="3"
                        BackgroundColor="#AA9FF5" 
                        Padding="45"
                        HorizontalOptions="FillAndExpand"
                        MaximumWidthRequest="500"
                        >

                        <Border.Shadow>
                            <Shadow
                                Opacity="0.25"
                                Radius="3"
                                Offset="0,7"
                                Brush="Black" />
                        </Border.Shadow>

                        <StackLayout Spacing="10" HorizontalOptions="Center" VerticalOptions="Center" >
                            
                            <Label Text="Dnevnik" TextColor="#FFFFFF" FontSize="30" FontAttributes="Bold" LineBreakMode="WordWrap" MaxLines="2" />
                            <Image Source="book_diary_icon.png" HeightRequest="100" WidthRequest="100"/>
                            
                        </StackLayout>
                        
                    </Border>

                </StackLayout>

                <!-- Daily Mood Tracker -->
                <VerticalStackLayout Spacing="10">
                    <Label Text="Dnevni tracker raspoloženja" FontSize="30" FontAttributes="Bold" TextColor="#333333" HorizontalOptions="Center"/>
                    <Border 
                        StrokeShape="RoundRectangle 40"
                        StrokeThickness="0"
                        BackgroundColor="#FFFFFF" 
                        Padding="10"
                        HorizontalOptions="Fill"
                        MaximumWidthRequest="540"
                        Margin="10"
                        >

                        <Border.Shadow>
                            <Shadow
                                Opacity="0.25"
                                Radius="3"
                                Offset="0,7"
                                Brush="Black" />
                        </Border.Shadow>
                        <VerticalStackLayout Spacing="10">
                            <HorizontalStackLayout Spacing="10" HorizontalOptions="Center" Margin="0, 15, 0, 10">
                                <Label Text="Kako se osećaš danas?" TextColor="#333333" FontSize="30" HorizontalOptions="Center" VerticalOptions="Start"/>
                                <Image Source="settings_gear.png" HeightRequest="35" WidthRequest="35" HorizontalOptions="Center" VerticalOptions="Start" Margin="30, 0, 0, 0"/>
                            </HorizontalStackLayout>
                            <StackLayout Orientation="Horizontal" HorizontalOptions="Center" Spacing="17">
                                <Image Source="mindwave_icon_test.png" HeightRequest="80" WidthRequest="80"/>
                                <Image Source="mindwave_icon_test.png" HeightRequest="80" WidthRequest="80"/>
                                <Image Source="mindwave_icon_test.png" HeightRequest="80" WidthRequest="80"/>
                                <Image Source="mindwave_icon_test.png" HeightRequest="80" WidthRequest="80"/>
                                <Image Source="mindwave_icon_test.png" HeightRequest="80" WidthRequest="80"/>
                            </StackLayout>
                        </VerticalStackLayout>
                    </Border>
                </VerticalStackLayout>

                <!-- Exercises Section -->
                <VerticalStackLayout Spacing="10" Padding="20,30,20,10">
                    <Label Text="Vežbe" FontSize="30" FontAttributes="Bold" TextColor="#333333" HorizontalOptions="Center"/>
                    <!-- Deep Breathing Exercise -->
                    <Border 
                        StrokeShape="RoundRectangle 40"
                        StrokeThickness="0"
                        BackgroundColor="#61f2bb" 
                        Padding="15"
                        HorizontalOptions="Fill"
                        MaximumWidthRequest="540"
                        Margin="10"
                        >

                        <Border.Shadow>
                            <Shadow
                                Opacity="0.25"
                                Radius="3"
                                Offset="0,7"
                                Brush="Black" />
                        </Border.Shadow>
                        <Grid ColumnDefinitions="Auto, *, Auto" VerticalOptions="Center">
                            <!-- Image -->
                            <Image Grid.Column="0" Source="health_sleep_icon.png" HeightRequest="50" WidthRequest="50" 
                                   VerticalOptions="Center" HorizontalOptions="Start" Margin="10,0,0,0"/>

                            <!-- Text -->
                            <VerticalStackLayout Grid.Column="1" VerticalOptions="Center" Margin="15,0">
                                <Label Text="Duboko disanje" FontSize="18" FontAttributes="Bold" TextColor="#333333"/>
                                <Label Text="Završeno 80%" FontSize="14" TextColor="#666666"/>
                            </VerticalStackLayout>

                            <!-- Progress bar -->
                            <Border Grid.Column="2" WidthRequest="100" HeightRequest="20" StrokeShape="RoundRectangle 40"
                                    BackgroundColor="#555555" Padding="0" VerticalOptions="Center" HorizontalOptions="End" Margin="0, 0, 20, 0">
                                <BoxView x:Name="ProgressFill" 
                                     BackgroundColor="#98f8ff" 
                                     HorizontalOptions="Start" 
                                     VerticalOptions="Fill" 
                                     CornerRadius="10"
                                     WidthRequest="60"/>
                                <!-- Set based on progress -->
                            </Border>
                        </Grid>

                    </Border>
                    <!-- Sleeping Exercise -->
                    <Border 
                        StrokeShape="RoundRectangle 40"
                        StrokeThickness="0"
                        BackgroundColor="#aa9ff5" 
                        Padding="15"
                        HorizontalOptions="Fill"
                        MaximumWidthRequest="540"
                        Margin="10"
                        >

                        <Border.Shadow>
                            <Shadow
                                Opacity="0.25"
                                Radius="3"
                                Offset="0,7"
                                Brush="Black" />
                        </Border.Shadow>
                        <Grid ColumnDefinitions="Auto, *, Auto" VerticalOptions="Center">
                            
                            <!-- IMAGE -->
                            <Image Grid.Column="0" Source="sleep_zzz_icon.png" HeightRequest="50" WidthRequest="50" VerticalOptions="Center" Margin="10, 0, 0, 0"/>
                            
                            <!-- TEXT -->
                            <VerticalStackLayout Grid.Column="1" VerticalOptions="Center" Margin="15,0">
                                <Label Text="Spavanje" FontSize="18" FontAttributes="Bold" TextColor="#333333"/>
                                <Label Text="Završeno 100%" FontSize="14" TextColor="#666666"/>
                            </VerticalStackLayout>

                            <!-- Progress bar -->
                            <Border Grid.Column="2" WidthRequest="100" HeightRequest="20" StrokeShape="RoundRectangle 40"
                                    BackgroundColor="#555555" Padding="0" VerticalOptions="Center" HorizontalOptions="End" Margin="0, 0, 20, 0">
                                <BoxView x:Name="ProgressFill2" 
                                     BackgroundColor="#98f8ff" 
                                     HorizontalOptions="Start" 
                                     VerticalOptions="Fill" 
                                     CornerRadius="10"
                                     WidthRequest="100"/>
                                <!-- Set based on progress -->
                            </Border>
                        </Grid>
                    </Border>
                </VerticalStackLayout>
            </VerticalStackLayout>
        </ScrollView>

        <!-- Bottom Navigation Bar -->
        <Grid Grid.Row="2" ColumnDefinitions="*, *, *, *" BackgroundColor="White" Padding="0,10" VerticalOptions="End">
            <StackLayout Grid.Column="0" HorizontalOptions="Center" VerticalOptions="Center">
                <Image Source="menu_icon.png" HeightRequest="30" WidthRequest="30"/>
            </StackLayout>
            <StackLayout Grid.Column="1" HorizontalOptions="Center" VerticalOptions="Center">
                <Image Source="message_icon.png" HeightRequest="30" WidthRequest="30"/>
            </StackLayout>
            <StackLayout Grid.Column="2" HorizontalOptions="Center" VerticalOptions="Center">
                <Image Source="calendar_icon.png" HeightRequest="30" WidthRequest="30"/>
            </StackLayout>
            <StackLayout Grid.Column="3" HorizontalOptions="Center" VerticalOptions="Center">
                <Image Source="profile_icon.png" HeightRequest="30" WidthRequest="30"/>
            </StackLayout>
        </Grid>
    </Grid>
</ContentPage>
